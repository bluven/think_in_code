# REST

## REST是什么

REST是一种Web开发的架构风格，这种架构风格目标在于高性能，可靠性和扩展性。为了达到这个目的，开发者开发出可管理，更新时对系统整体无影响的可复用组件。

REST不是一个架构标准。

REST依赖于无状态，可缓存的通信协议，实际上只有HTTP协议被应用。

REST意思是"表现成状态转换(representational state transfer)"，

## REST影响的架构属性

REST架构风格的约束影响的架构属性主要有： 

* 性能————在用户可感知的性能和网络效率方面，组件交互可能是最主要的因素。 
* 支持大量的组件和组件间的交互的扩展性。 
* 统一接口的简单性 
* 随需应变的组件的可修改性（即使应用正在运行） 
* 组件间通信的可见性 
* 组件的可移植性——跟数据一起迁移代码 
* 可靠性是从系统层面，在组件，连接器或者数据出现失败时的一种抵抗失败的特性。

## RESTful架构约束

REST的架构特性通过把具体交互约束应用于组件、连接器和数据的时候才能很好地被理解。只要遵循本节描述的REST约束，你的系统就能称之为RESTFUL。遵守这些约束，并且遵守REST架构风格，使得任意一种超媒体系统具备有吸引力的非功能特性，比如性能，可伸缩性，简单性，可修改性，可见性，可移植性以及可靠性。

标准的REST限制是：

* Client-Server。一个统一接口把客户端从服务端分离出来。分离关注点意味着客户端不必关心服务端的数据存储，它仅属于服务器内部功能，所以客户端的可移植性代码被提升了。服务端并不关心用户接口，或者用户状态，所以服务端能更加简单和可伸缩。服务端和客户端也能被独立替换或者开发，前提是只要它们之间的接口没有被改变。

* 无状态。client-server数据交换能通过服务器上，在每个请求之间不存储客户端上下文来进一步进行限制。来自任意客户端的每个请求都包含所有服务这个请求的必要信息，并且session状态被保存在客户端。session状态能够被服务器转移到其它服务，比如数据库，它在维护一个有生命周期的持久化状态并且允许鉴权。当它准备好转换到一个新的状态时客户端就开始发送请求。虽然一个或者更多请求正在进行，客户端被认为在转变。每个应用状态的表现层包含一个可以用来转向下一个状态的链接。
    
* 可缓存。在World Wide Web上，客户端和中间媒介能够缓存响应。响应必须显示或者隐式地定义它们自己是否可以被缓存，否则将使客户端在之后的请求中，重用响应中过期或者不合适的数据。管理良好的缓存部分或者全部消除了一些client-server交互，进一步提高了可伸缩性和性能。

* 分层的系统。一个客户端通常不能区分它是否直接连接到终端服务器或者中介服务器。中介服务器可以通过启动负载均衡和提供共享缓存来增加系统的可伸缩性。它们同时也加强了安全策略。

* 按需编码(Optional)。端通过可执行代码，能够暂时扩展或者定制化一个客户端的功能。这个例子中可以包含可执行的组件，比如Java applets以及客户端脚本，如JavaScript。

* 统一接口。统一接口限制是任何REST服务设计的基础。统一接口简化且解耦了架构，使得每一部分都能独立运行。对统一接口的四个限制如下：

    * 资源的识别。比如在基于web的REST系统中通过URIs来确认请求中的独立资源。资源本身与那些返回给客户端的表现层是概念上相分离的。比如服务端可以从它的数据库发送数据，如HTML、XML、JSON，它们都不是服务器的内部表现形式。
    
    * 通过表现层操作资源。当一个客户端保存了一个资源的表现层，包括任何附加的元数据，它就有足够的信息来修改和删除资源。
    
    * 自描述信息。每个消息包含足够的信息来描述如何处理这个信息。比如，调用哪个解析器可以通过一个互联网媒体类型（以前称之为MIME类型）来具体化。
    
    * 超媒体作为应用状态的引擎(HATEOAS)。客户端仅通过服务端动态指定的动作来做状态转换（比如超文本中的超链接）。一个应用除了简单固定的入口点，客户端并不会认为对于超出之前从服务器收到的描述于表现层的任意特殊动作对任意资源都可用。在两个资源之间，对于表示层链接并没有统一的接收格式。对于具体的REST超媒体链接，RFC 5988和JSON超媒体API语言（ RFC 5988 and JSON Hypermedia API Language）是两种流行的格式。

## 什么是资源

> 资源是一种看待服务器的方式，即，将服务器看作是由很多离散的资源组成。每个资源是服务器上一个可命名的抽象概念。因为资源是一个抽象的概念，所以它不仅仅能代表服务器文件系统中的一个文件、数据库中的一张表等等具体的东西，可以将资源设计的要多抽象有多抽象，只要想象力允许而且客户端应用开发者能够理解。与面向对象设计类似，资源是以名词为核心来组织的，首先关注的是名词。一个资源可以由一个或多个URI来标识。URI既是资源的名称，也是资源在Web上的地址。对某个资源感兴趣的客户端应用，可以通过资源的URI与其进行交互。

[http://www.infoq.com/cn/articles/understanding-restful-style](http://www.infoq.com/cn/articles/understanding-restful-style)


> REST的名称"表现层状态转化"中，省略了主语。"表现层"其实指的是"资源"（Resources）的"表现层"。
所谓"资源"，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。

> 所谓"上网"，就是与互联网上一系列的"资源"互动，调用它的URI。

[http://www.ruanyifeng.com/blog/2011/09/restful](http://www.ruanyifeng.com/blog/2011/09/restful)


## 什么是资源的表述

> 资源的表述是一段对于资源在某个特定时刻的状态的描述。可以在客户端-服务器端之间转移（交换）。资源的表述可以有多种格式，例如HTML/XML/JSON/纯文本/图片/视频/音频等等。资源的表述格式可以通过协商机制来确定。请求-响应方向的表述通常使用不同的格式。

[http://www.infoq.com/cn/articles/understanding-restful-style](http://www.infoq.com/cn/articles/understanding-restful-style)

> "资源"是一种信息实体，它可以有多种外在表现形式。我们把"资源"具体呈现出来的形式，叫做它的"表现层"（Representation）。
> 
> 比如，文本可以用txt格式表现，也可以用HTML格式、XML格式、JSON格式表现，甚至可以采用二进制格式；图片可以用JPG格式表现，也可以用PNG格式表现。

> URI只代表资源的实体，不代表它的形式。严格地说，有些网址最后的".html"后缀名是不必要的，因为这个后缀名表示格式，属于"表现层"范畴，而URI应该只代表"资源"的位置。它的具体表现形式，应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对"表现层"的描述。
> 
[http://www.ruanyifeng.com/blog/2011/09/restful](http://www.ruanyifeng.com/blog/2011/09/restful)
 
## 什么是状态转移（State Transfer）

状态转移（state transfer）与状态机中的状态迁移（state transition）的含义是不同的。状态转移说的是：在客户端和服务器端之间转移（transfer）代表资源状态的表述。通过转移和操作资源的表述，来间接实现操作资源的目的。

## 什么是统一接口？

REST要求，必须通过统一的接口来对资源执行各种操作。对于每个资源只能执行一组有限的操作。以HTTP/1.1协议为例，HTTP/1.1协议定义了一个操作资源的统一接口，主要包括以下内容：

* 7个HTTP方法：GET/POST/PUT/DELETE/PATCH/HEAD/OPTIONS

* HTTP头信息（可自定义）

* HTTP响应状态代码（可自定义）

* 一套标准的内容协商机制

* 一套标准的缓存机制

* 一套标准的客户端身份认证机制

REST还要求，对于资源执行的操作，其操作语义必须由HTTP消息体之前的部分完全表达，不能将操作语义封装在HTTP消息体内部。这样做是为了提高交互的可见性，以便于通信链的中间组件实现缓存、安全审计等等功能。

## 什么是超文本驱动？

“超文本驱动”又名“将超媒体作为应用状态的引擎”（Hypermedia As The Engine Of Application State，来自Fielding博士论文中的一句话，缩写为HATEOAS）。将Web应用看作是一个由很多状态（应用状态）组成的有限状态机。资源之间通过超链接相互关联，超链接既代表资源之间的关系，也代表可执行的状态迁移。在超媒体之中不仅仅包含数据，还包含了状态迁移的语义。以超媒体作为引擎，驱动Web应用的状态迁移。通过超媒体暴露出服务器所提供的资源，服务器提供了哪些资源是在运行时通过解析超媒体发现的，而不是事先定义的。从面向服务的角度看，超媒体定义了服务器所提供服务的协议。客户端应该依赖的是超媒体的状态迁移语义，而不应该对于是否存在某个URI或URI的某种特殊构造方式作出假设。一切都有可能变化，只有超媒体的状态迁移语义能够长期保持稳定。

## REST的特点

* 面向资源（Resource Oriented）

* 可寻址（Addressability）

* 连通性（Connectedness）

* 无状态（Statelessness）

* 统一接口（Uniform Interface）

这6个特征是REST架构设计优秀程度的判断标准。其中，面向资源是REST最明显的特征，即，REST架构设计是以资源抽象为核心展开的。可寻址说的是：每一个资源在Web之上都有自己的地址。连通性说的是：应该尽量避免设计孤立的资源，除了设计资源本身，还需要设计资源之间的关联关系，并且通过超链接将资源关联起来。无状态、统一接口是REST的两种架构约束，超文本驱动是REST的一个关键词。

## REST的优点
## REST的缺点

