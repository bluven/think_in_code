# 友善待人，编写稳定的代码

---
[原文](http://technosophos.com/2018/07/04/be-nice-and-write-stable-code.html)
---
停止重构你的代码！专业的开发者重视稳定性甚于“代码纯洁性”。不要在每次发布中追求完美代码，善待他人，开发稳定的API。这篇文章中，我将讨论如何实践编写代码并保持稳定。

## The Non-Goal

当开始写代码时，这样的建议毫无益处：

    > 当你写代码时，要做到不会过时

如果历史教会我们什么东西，那就是我们都是差劲的未来预言家。努力保证API干净，设计灵活，深思熟虑的默认值当然是好得实践。但不可避免的是，你的用户或突发需求总会给你惊喜。

我想讨论的是如何应对好这些惊喜，如何避免给你的用户带去惊喜（和挫折）。

## 版本号与语义版本号

在软件中，我们使用版本号来告知有些东西改变了。版本号策略有极其简单的（每个版本递增的数字或时间戳），也有极其复杂的（1.0~pre3+dfsg-0.1+b2, 2.1.1+git20160721~8efc468-2 和 1.2.0+LibO5.2.7-1+deb9u4 )

但当说及软件版号，现在处于领先地位的版本号方案是SemVer（语义化版本）。不要被愚弄了！许多人号称直到语义化版本怎么回事，但其实并未读过规范。因为这将是我们要讨论的关键内容，这里是规范的一个摘要：
 
 版本号采用`X.Y.Z`的形式，有时候会有额外的预发布和构建信息：`X.Y.Z-AAA#BBB`。每个字段都有特定明确的含义：
 
 * `X`是大版本号。每次变化意味着API或行为的破坏性改变。
 * `Y`是小版本号。每次变化意味着新特性的添加，但API本身没有破坏性变化。 
 * `Z`是补丁版本号。每次变化意味着内部发生了变化，但API没有（甚至是兼容性）变化。

这3点对我们至关重要。再一次，我建议花10分钟阅读整个规范。

数不清的项目使用了看着像语义化版本的版本格式，但很多忽略了版本号后面的语义。经常能看到版本号是根据直觉递增了，而不是一致性的语义：这看起来像是个小的版本更新。

这篇文章的目的是阐述如何开发真正遵循语义化版本的软件，摆脱“凭直觉”的版本，让你的用户保持心态和平。
